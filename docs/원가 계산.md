# 원가 계산 (플랜/테넌트 기준)

## 개요
- 가정: 공용 인프라(Supabase Pro 1, Vercel Pro 1시트, Railway 소형 워커 1개)를 여러 테넌트가 공유하고, 메일 발신은 고객 SMTP를 사용해 우리 쪽 발송 단가는 0원으로 간주.
- 주요 변수비는 문자/알림톡 단가가 지배적이며, DB/트래픽/스토리지는 현 사용량에서는 미미함.

## 사용량 가정(플랜별)
- 스타터: 메일 수신 500건/월(ORDER_ONLY), 알림 500건/월, 발신 불가.
- 프로페셔널: 메일 수신 2,000건/월(FULL_INBOX), 알림 2,000건/월, 발신 가능(고객 SMTP).
- 비즈니스: 메일 수신 10,000건/월(FULL_INBOX), 알림 10,000건/월, 발신 가능(고객 SMTP).
- 메일 메타데이터 평균 20KB/건, DB egress 5MB/1,000건 수준(미미).

## 단가 근거(대략치, 2025)
- Supabase Pro: $25/월(8GB DB, 50GB egress 포함), 초과 DB ~$0.125/GB, egress ~$0.09/GB.
- Vercel Pro: $20/시트/월, 기본 할당 내 함수·트래픽 사용(대부분 무시 가능).
- Railway 워커: 소형 512MB~1GB 상시 구동 가정 $10/월.
- NCP SMS/알림톡: 기본형 ~₩8.8/건(LMS ~₩28, MMS ~₩55).
- 메일 발신: 고객 SMTP 사용 → 우리 단가 0원.

## 공용 고정비(테넌트당 배분 예시)
- (Supabase $25 + Vercel $20 + Railway $10) / 200테넌트 ≈ $0.28/테넌트(≈₩400) → 사실상 무시 가능, 변수비가 지배적.

## 플랜별 월 원가(테넌트당, 변수비 중심)
- 스타터
  - 알림 500건 × ₩8.8 = ≈₩4,400
  - DB/트래픽 = ≈0원
  - 합계 ≈ ₩4,800 (고정비 몫 포함)
- 프로페셔널
  - 알림 2,000건 × ₩8.8 = ≈₩17,600
  - DB/트래픽 = ≈0원
  - 합계 ≈ ₩18,000
- 비즈니스
  - 알림 10,000건 × ₩8.8 = ≈₩88,000
  - DB/트래픽 = ≈0원
  - 합계 ≈ ₩89,000

## 리스크/추가 고려
- 알림톡/문자 믹스와 LMS/MMS 사용 시 단가 상승 → 플랜별 기본 단가 전제 명확히 필요.
- 첨부 저장·보존일 확대 시 Supabase Storage/DB 비용 재산출 필요.
- IMAP 풀링/웹훅 증가로 서버리스·워커 스케일 아웃 시 Railway/함수 비용이 선형 증가.
- 이메일 발신 한도는 수신자 수 기준으로 집계해야 플랜 한도 우회 방지(현재 로직 점검 권장).
